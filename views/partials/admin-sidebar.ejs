<!-- Sidebar -->
<div class="sidebar">
    <div class="sidebar-header">
        <h3>School MS</h3>
        <p>Admin Dashboard</p>
    </div>
    
    <ul class="sidebar-menu">
        <li>
            <a href="/admin/dashboard" class="<%= activePage === 'dashboard' ? 'active' : '' %>">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
        </li>
        <!-- Student Management Section -->
        <li class="sidebar-submenu">
            <a href="#" class="<%= activePage === 'students' || activePage === 'create-student' ? 'active' : '' %>">
                <i class="fas fa-user-graduate"></i> Students
                <i class="fas fa-chevron-right submenu-icon"></i>
            </a>
            <ul class="submenu <%= activePage === 'students' || activePage === 'create-student' ? 'show' : '' %>">
                <li>
                    <a href="/admin/students" class="<%= activePage === 'students' ? 'active' : '' %>">
                        <i class="fas fa-list"></i> All Students
                    </a>
                </li>
                <li>
                    <a href="/admin/create-student" class="<%= activePage === 'create-student' ? 'active' : '' %>">
                        <i class="fas fa-plus"></i> Add Student
                    </a>
                </li>
            </ul>
        </li>
        <!-- Parent Management Section -->
        <li class="sidebar-submenu">
            <a href="#" class="<%= activePage === 'parents' || activePage === 'create-parent' || activePage === 'link-children' ? 'active' : '' %>">
                <i class="fas fa-users"></i> Parents
                <i class="fas fa-chevron-right submenu-icon"></i>
            </a>
            <ul class="submenu <%= activePage === 'parents' || activePage === 'create-parent' || activePage === 'link-children' ? 'show' : '' %>">
                <li>
                    <a href="/admin/parents" class="<%= activePage === 'parents' ? 'active' : '' %>">
                        <i class="fas fa-list"></i> All Parents
                    </a>
                </li>
                <li>
                    <a href="/admin/create-parent" class="<%= activePage === 'create-parent' ? 'active' : '' %>">
                        <i class="fas fa-plus"></i> Add Parent
                    </a>
                </li>
                <li>
                    <a href="/admin/link-children" class="<%= activePage === 'link-children' ? 'active' : '' %>">
                        <i class="fas fa-link"></i> Link Children
                    </a>
                </li>
            </ul>
        </li>
        <!-- Teacher Management Section -->
        <li class="sidebar-submenu">
            <a href="#" class="<%= activePage === 'teachers' || activePage === 'create-teacher' ? 'active' : '' %>">
                <i class="fas fa-chalkboard-teacher"></i> Teachers
                <i class="fas fa-chevron-right submenu-icon"></i>
            </a>
            <ul class="submenu <%= activePage === 'teachers' || activePage === 'create-teacher' ? 'show' : '' %>">
                <li>
                    <a href="/admin/teachers" class="<%= activePage === 'teachers' ? 'active' : '' %>">
                        <i class="fas fa-list"></i> All Teachers
                    </a>
                </li>
                <li>
                    <a href="/admin/create-teacher" class="<%= activePage === 'create-teacher' ? 'active' : '' %>">
                        <i class="fas fa-plus"></i> Add Teacher
                    </a>
                </li>
            </ul>
        </li>
        <!-- Class Management Section -->
        <li class="sidebar-submenu">
            <a href="#" class="<%= activePage === 'classes' || activePage === 'create-class' ? 'active' : '' %>">
                <i class="fas fa-chalkboard"></i> Classes
                <i class="fas fa-chevron-right submenu-icon"></i>
            </a>
            <ul class="submenu <%= activePage === 'classes' || activePage === 'create-class' ? 'show' : '' %>">
                <li>
                    <a href="/admin/classes" class="<%= activePage === 'classes' ? 'active' : '' %>">
                        <i class="fas fa-list"></i> All Classes
                    </a>
                </li>
                <li>
                    <a href="/admin/create-class" class="<%= activePage === 'create-class' ? 'active' : '' %>">
                        <i class="fas fa-plus"></i> Add Class
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <a href="/admin/grades" class="<%= activePage === 'grades' ? 'active' : '' %>">
                <i class="fas fa-book"></i> Grades
            </a>
        </li>
        <li>
            <a href="/admin/attendance" class="<%= activePage === 'attendance' ? 'active' : '' %>">
                <i class="fas fa-calendar-check"></i> Attendance
            </a>
        </li>
        <li>
            <a href="/admin/expenses" class="<%= activePage === 'expenses' ? 'active' : '' %>">
                <i class="fas fa-money-bill-wave"></i> Expenses
            </a>
        </li>
        <li>
            <a href="/admin/settings" class="<%= activePage === 'settings' ? 'active' : '' %>">
                <i class="fas fa-cog"></i> Settings
            </a>
        </li>
        <li>
            <a href="#" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </li>
    </ul>
</div> 

<style>
    .sidebar {
        width: var(--sidebar-width);
        background-color: #2c3e50;
        color: white;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        overflow-y: auto;
        z-index: 1050;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    
    .sidebar-header {
        background-color: #243342;
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .sidebar-header h3 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        color: #3498db;
    }
    
    .sidebar-header p {
        margin: 5px 0 0;
        font-size: 0.85rem;
        opacity: 0.7;
    }
    
    .sidebar-menu {
        list-style: none;
        padding: 15px 0;
        margin: 0;
    }
    
    .sidebar-menu > li {
        margin-bottom: 5px;
    }
    
    .sidebar-menu > li > a {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s;
        border-left: 4px solid transparent;
    }
    
    .sidebar-menu > li > a:hover {
        background-color: rgba(52, 152, 219, 0.1);
        color: white;
    }
    
    .sidebar-menu > li > a.active {
        background-color: rgba(52, 152, 219, 0.2);
        color: white;
        border-left: 4px solid #3498db;
    }
    
    .sidebar-menu i {
        margin-right: 10px;
        font-size: 1rem;
        width: 20px;
        text-align: center;
    }

    .sidebar-submenu > a {
        position: relative;
    }
    
    .submenu-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        transition: transform 0.3s ease;
        font-size: 0.75rem;
    }
    
    .sidebar-submenu > a.active .submenu-icon {
        transform: translateY(-50%) rotate(90deg);
    }
    
    .submenu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        padding-left: 15px;
        background-color: rgba(0, 0, 0, 0.1);
        border-left: 4px solid transparent;
        margin-left: 0;
        list-style: none;
    }
    
    .submenu.show {
        max-height: 500px;
    }
    
    .submenu a {
        padding: 10px 20px 10px 30px;
        font-size: 0.9rem;
        display: block;
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: all 0.3s;
    }
    
    .submenu a:hover {
        color: white;
        background-color: rgba(52, 152, 219, 0.1);
    }
    
    .submenu a.active {
        color: #3498db;
        background-color: rgba(52, 152, 219, 0.1);
    }
    
    .submenu i {
        font-size: 0.8rem;
        margin-right: 8px;
        width: 16px;
        text-align: center;
    }
    
    /* Sidebar collapsed state */
    .sidebar-collapsed .sidebar {
        width: 70px;
    }
    
    .sidebar-collapsed .sidebar-header h3,
    .sidebar-collapsed .sidebar-header p,
    .sidebar-collapsed .sidebar-menu a span,
    .sidebar-collapsed .submenu-icon {
        display: none;
    }
    
    .sidebar-collapsed .sidebar-menu > li > a {
        padding: 15px 0;
        justify-content: center;
    }
    
    .sidebar-collapsed .sidebar-menu i {
        margin-right: 0;
        font-size: 1.2rem;
    }
    
    .sidebar-collapsed .submenu {
        display: none;
    }
    
    /* Logout button special styling */
    #logout-btn {
        color: #ff6b6b;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: 15px;
        padding-top: 15px;
    }
    
    #logout-btn:hover {
        background-color: rgba(255, 107, 107, 0.1);
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Toggle submenu on click
        const submenuToggles = document.querySelectorAll('.sidebar-submenu > a');
        
        submenuToggles.forEach(toggle => {
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Toggle active class for the toggle
                this.classList.toggle('active');
                
                // Get the submenu
                const submenu = this.nextElementSibling;
                
                // Toggle show class for the submenu
                if (submenu.classList.contains('show')) {
                    submenu.classList.remove('show');
                } else {
                    // Close any open submenus first
                    document.querySelectorAll('.submenu.show').forEach(menu => {
                        if (menu !== submenu) {
                            menu.classList.remove('show');
                            menu.previousElementSibling.classList.remove('active');
                        }
                    });
                    
                    submenu.classList.add('show');
                }
            });
        });
        
        // Auto-expand submenu if a child is active
        const activeSublink = document.querySelector('.submenu a.active');
        if (activeSublink) {
            let parent = activeSublink.closest('.submenu');
            if (parent) {
                parent.classList.add('show');
                parent.previousElementSibling.classList.add('active');
            }
        }
        
        // Handle logout
        document.getElementById('logout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            
            if (confirm('Are you sure you want to logout?')) {
                // Perform logout action (you can customize this as needed)
                fetch('/admin/logout', {
                    method: 'POST',
                    credentials: 'same-origin'
                })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/admin/login';
                    }
                })
                .catch(error => {
                    console.error('Logout error:', error);
                });
            }
        });
    });
</script> 